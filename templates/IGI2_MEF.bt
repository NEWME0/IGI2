//------------------------------------------------
//--- 010 Editor v9.0.1 Binary Template
//
//      File: IGI2_MEF.bt
//   Authors: Rotari Artiom
//   Version: 1.0
//   Purpose: 
//  Category: Game
// File Mask: ILFF
//  ID BYTEs: 
//   History: 
//------------------------------------------------


#include "COMMON/ALIGN.bt";
#include "COMMON/DATETIME.bt";


struct
{
    LittleEndian();

    CHAR  Signature[4];
    UINT32 size;
    UINT32 align;
    UINT32 next;

    struct
    {
        CHAR Signature[4];

        while(FTell() < FileSize())
        {
            switch(ReadString(FTell(), 4))
            {
                case "HSEM":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            FLOAT _00;  // {0.1599999964237213}
                            DATETIME DateTime;
                            UINT32 _08;   // {0, 1, 3}
                            UINT32 _09;   // {0}
                            UINT32 _10;   // {0}
                            UINT32 _11;   // {0}
                            FLOAT _12;  // [-1197574.5         - 588632.5625],   2708
                            FLOAT _13;  // [-551761.5625       - 164895.65625],  2704
                            FLOAT _14;  // [-1004530.75        - 245571.46875],  2689
                            FLOAT _15;  // [ 0.0               - 4107811.25],    2714
                            FLOAT _16;  // [-1197574.5         - 588632.5625],   2763
                            FLOAT _17;  // [-450069.625        - 166205.71875],  2751
                            FLOAT _18;  // [-1004220.0         - 224238.328125], 2733
                            FLOAT _19;  // [ 8.636710166931152 - 4107811.25],    2740
                            FLOAT _20;  // [-1197574.5         - 588632.5625],   2763
                            FLOAT _21;  // [-450069.625        - 166205.71875],  2751
                            FLOAT _22;  // [-1004220.0         - 224238.328125], 2733
                            FLOAT _23;  // [ 8.636710166931152 - 4107811.25],    2740
                            UINT32 _24;   // [0 .. 14793], 748
                            UINT32 _25;   // [0 .. 15430], 1049
                            UINT32 _26;   // [36 .. 494166], 2324
                            UINT32 _27;   // [0 .. 14795], 539
                            UINT32 _28;   // [0 .. 16246], 747
                            UINT32 _29;   // [0 .. 1167796], 1291
                            FLOAT _30;  // [16.031251907348633 .. 5001837.0], 1993
                            UINT16 _31; // [0 .. 15], 11
                            UINT16 _32; // [0 .. 63], 36
                            UINT16 _33; // [0 .. 92], 42
                            UINT16 _34; // [0 .. 68], 34
                            UINT16 _35; // [0 .. 19], 16
                            UINT16 _36; // {0, 31, 28, 47}
                            UINT16 _37; // [0 .. 182], 25
                            UINT16 _38; // {0, 43947}
                            UINT16 _39; // {0, 43947}
                            UINT16 _40; // {0, 43947}
                            UINT16 _41; // {0, 43947}
                            UINT16 _42; // {0, 43947}
                            UINT16 _43; // {0, 43947}
                            UINT16 _44; // {0, 43947}
                            UINT16 _45; // {0, 43947}
                            UINT16 _46; // {0, 43947}
                            UINT16 _47; // {0, 43947}
                            UINT16 _48; // {0, 43947}
                            UINT16 _49; // {0, 43947}
                            UINT16 _50; // {0, 43947}
                            UINT16 _51; // {0, 43947}
                            UINT16 _52; // {0, 43947}
                            UINT16 _53; // {0}
                            UINT16 _54; // {0}
                            UINT16 _55; // {0}
                            UINT16 _56; // {0}
                        } data;

                     ALIGN(4);
                    } HSEM;
                    break;
                case "REIH":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            BYTE _0[HSEM.data._36];

                            while(FTell() % align != 0) BYTE pad;

                            struct
                            {
                                FLOAT _0;
                                FLOAT _1;
                                FLOAT _2;
                            } _1[HSEM.data._36];
                        } data;

                        ALIGN(4);
                    } REIH;
                    break;
                case "MANB":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                CHAR name[16];
                            } bname[size / 16];
                        } data;

                        ALIGN(4);
                    } MANB;
                    break;
                case "ATTA":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                CHAR  name[16];
                                FLOAT _01;  // [-270479.34375 .. 902459.3125], 1481
                                FLOAT _02;  // [-358269.3125 .. 293201.09375], 1446
                                FLOAT _03;  // [-133254.34375 .. 289563.84375], 937
                                FLOAT _04;  // [-1.0 .. 1.0], 229
                                FLOAT _05;  // [-1.0 .. 1.0], 297
                                FLOAT _06;  // [-1.0 .. 1.0], 219
                                FLOAT _07;  // [-1.0 .. 1.0], 304
                                FLOAT _08;  // [-1.0 .. 1.0], 245
                                FLOAT _09;  // [-1.0 .. 1.0], 191
                                FLOAT _10;  // [-1.0 .. 1.0], 255
                                FLOAT _11;  // [-1.0 .. 1.0], 244
                                FLOAT _12;  // [-1.0 .. 1.0], 93
                                int   _13;  // {0, 2880154539}
                                int   _14;  // {0, 4, -1, 15}

                            } unk[size / 72];
                        } data;

                        ALIGN(4);
                    } ATTA;
                    break;
                case "XTVM":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                                UINT32 _03;
                            } unk[size / 16];
                        } data;

                        ALIGN(4);
                    } XTVM;
                    break;
                case "TROP":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                                UINT32 _03;
                                UINT32 _04;
                            } unk[size / 20];
                        } data;

                        ALIGN(4);
                    } TROP;
                    break;
                case "XVTP":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                            } unk[size / 12];
                        } data;

                        ALIGN(4);
                    } XVTP;
                    break;
                case "CFTP":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                            } unk[size / 12];
                        } data;

                        ALIGN(4);
                    } CFTP;
                    break;
                case "WOLG":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                FLOAT _00;
                                FLOAT _01;
                                FLOAT _02;
                                FLOAT _03;
                                FLOAT _04;
                                FLOAT _05;
                                FLOAT _06;
                                UINT32  _07;
                            } unk[size / 32];
                        } data;

                        ALIGN(4);
                    } WOLG;
                    break;
                case "D3DR":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        switch(size)
                        {
                            case 36:
                                struct
                                {
                                    UINT32 _four;
                                    UINT32 _tris;
                                    UINT32 _dner;
                                    UINT32 _vert;
                                    UINT32 _04;
                                    UINT32 _05;
                                    UINT32 _06;
                                    UINT32 _07;
                                    UINT32 _08;
                                } data;
                                break;
                            case 40:
                                struct
                                {
                                    UINT32 _four;
                                    UINT32 _tris;
                                    UINT32 _dner;
                                    UINT32 _03;
                                    UINT32 _04;
                                    UINT32 _vert;
                                    UINT32 _06;
                                    UINT32 _07;
                                    UINT32 _08;
                                    UINT32 _09;
                                } data;
                                break;
                            case 44:
                                struct
                                {
                                    UINT32 _four;
                                    UINT32 _01;
                                    UINT32 _tris;
                                    UINT32 _dner;
                                    UINT32 _vert;
                                    UINT32 _05;
                                    UINT32 _06;
                                    UINT32 _07;
                                    UINT32 _08;
                                    UINT32 _09;
                                    UINT32 _10;
                                } data;
                                break;
                        }

                        ALIGN(4);
                    } D3DR;
                    break;
                case "ECAF":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT16 _a;
                                UINT16 _b;
                                UINT16 _c;
                            } face[D3DR.data._tris];
                        } data;

                        ALIGN(4);
                    } ECAF;
                    break;
                case "DNER":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            switch(D3DR.size)
                            {
                                case 36:
                                case 40:
                                    struct
                                    {
                                        UINT32   _00;
                                        FLOAT  _01;
                                        FLOAT  _02;
                                        FLOAT  _03;
                                        UINT16 _04;
                                        UINT16 _05;
                                        UINT16 _06;
                                        UINT16 _07;
                                        UINT16 _08;
                                        UINT32   _09;
                                        UINT16 _10;
                                    } dner[D3DR.data._dner];
                                    break;
                                case 44:
                                    struct
                                    {
                                        UINT32   _00;
                                        FLOAT  _01;
                                        FLOAT  _02;
                                        FLOAT  _03;
                                        UINT16 _04;
                                        UINT16 _05;
                                        UINT16 _06;
                                        UINT16 _07;
                                        UINT32   _08;
                                    } dner[D3DR.data._dner];
                                    break;
                            }
                        } data;

                        ALIGN(4);
                    } DNER;
                    break;
                case "XTRV":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            switch(D3DR.size)
                            {
                                case 36:
                                    struct
                                    {
                                        FLOAT _00;
                                        FLOAT _01;
                                        FLOAT _02;
                                        FLOAT _03;
                                        FLOAT _04;
                                        FLOAT _05;
                                        FLOAT _06;
                                        FLOAT _07;
                                    } vertex[D3DR.data._vert];
                                    break;
                                case 40:
                                    struct
                                    {
                                        FLOAT _00;
                                        FLOAT _01;
                                        FLOAT _02;
                                        FLOAT _03;
                                        FLOAT _04;
                                        FLOAT _05;
                                        FLOAT _06;
                                        FLOAT _07;
                                        FLOAT _08;
                                        FLOAT _09;
                                    } vertex[D3DR.data._vert];
                                    break;
                                case 44:
                                    struct
                                    {
                                        FLOAT _00;
                                        FLOAT _01;
                                        FLOAT _02;
                                        FLOAT _03;
                                        FLOAT _04;
                                        FLOAT _05;
                                        FLOAT _06;
                                    } vertex[D3DR.data._vert];
                                    break;
                            }
                        } data;

                        ALIGN(4);
                    } XTRV;
                    break;
                case "PMTL":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                            } unk[size / 8];
                        } data;

                        ALIGN(4);
                    } PMTL;
                    break;
                case "HSMC":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            UINT32 _00; // [0 .. 14795], 513
                            UINT32 _01; // [0 .. 15226], 730
                            UINT32 _02; // [0 .. 46], 35
                            UINT32 _03; // [0 .. 29589], 513
                            UINT32 _04; // {0}
                            UINT32 _05; // {0}
                            UINT32 _06; // {0}
                            UINT32 _07; // {0}
                            UINT32 _08; // [0 .. 1562], 188
                            UINT32 _09; // [0 .. 1020], 163
                            UINT32 _10; // {0, 1, 2}
                            UINT32 _11; // [0 .. 3123], 188
                            UINT32 _12; // {0}
                            UINT32 _13; // {0}
                            UINT32 _14; // {0}
                            UINT32 _15; // {0}
                        } data;

                        ALIGN(4);
                    } HSMC;
                    break;
                case "XTVC":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                                UINT32 _03;
                                UINT32 _04;
                            } unk[size / 20];
                        } data;

                        ALIGN(4);
                    } XTVC;
                    break;
                case "ECFC":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                            } unk[size / 12];
                        } data;

                        ALIGN(4);
                    } ECFC;
                    break;
                case "TAMC":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                                UINT32 _03;
                            } unk[size / 16];
                        } data;

                        ALIGN(4);
                    } TAMC;
                    break;
                case "HPSC":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                FLOAT  _00;
                                FLOAT  _01;
                                FLOAT  _02;
                                FLOAT  _03;
                                UINT32   _04;
                                UINT16 _05;
                                UINT16 _06;
                            } unk [size / 24];
                        } data;

                        ALIGN(4);
                    } HPSC;
                    break;
                case "HPRM":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                                UINT32 _03;
                            } unk[size / 16];
                        } data;

                        ALIGN(4);
                    } HPRM;
                    break;
                case "TXAN":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            UINT32 _00; // {25}
                            UINT32 _01; // {26}
                            UINT32 _02; // {0}
                            UINT32 _03; // {1}
                            UINT32 _04; // {2}
                            UINT32 _05; // {3}
                            UINT32 _06; // {4}
                            UINT32 _07; // {5}
                            UINT32 _08; // {6}
                            UINT32 _09; // {7}
                            UINT32 _10; // {8}
                            UINT32 _11; // {9}
                            UINT32 _12; // {10}
                            UINT32 _13; // {11}
                            UINT32 _14; // {12}
                            UINT32 _15; // {13}
                            UINT32 _16; // {14}
                            UINT32 _17; // {15}
                            UINT32 _18; // {16}
                            UINT32 _19; // {17}
                            UINT32 _20; // {18}
                            UINT32 _21; // {19}
                            UINT32 _22; // {20}
                            UINT32 _23; // {21}
                            UINT32 _24; // {22}
                            UINT32 _25; // {23}
                            UINT32 _26; // {24}
                            UINT32 _27; // {25}
                        } data;

                        ALIGN(4);
                    } TXAN;
                    break;
                case "SEMS":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                                UINT32 _03;
                                UINT32 _04;
                                UINT32 _05;
                                UINT32 _06;
                            } unk[size / 28];
                        } data;

                        ALIGN(4);
                    } SEMS;
                    break;
                case "XTVS":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                            } unk[size / 12];
                        } data;

                        ALIGN(4);
                    } XTVS;
                    break;
                case "CAFS":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                                UINT32 _02;
                                UINT32 _03;
                                FLOAT _04;
                                FLOAT _05;
                                FLOAT _06;
                                UINT32 _07;
                                UINT32 _08;
                                UINT32 _09;
                                UINT32 _10;
                                FLOAT _11;
                                FLOAT _12;
                                FLOAT _13;
                            } unk[size / 56];
                        } data;

                        ALIGN(4);
                    } CAFS;
                    break;
                case "EGDE":
                    struct
                    {
                        CHAR Signature[4];
                        UINT32 size;
                        UINT32 align;
                        UINT32 next;

                        struct
                        {
                            struct
                            {
                                UINT32 _00;
                                UINT32 _01;
                            } unk[size / 8];
                        } data;

                        ALIGN(4);
                    } EGDE;
                    break;
                default: Assert(false);
            }
        }
    } OCEM;
} ILFF;